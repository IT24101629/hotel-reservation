<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" th:replace="~{layout :: layout(~{::title}, ~{::content})}">
<head>
    <title>My Profile - Hotel Reservation System</title>
</head>
<body>
<div th:fragment="content">
    <div class="container">
        <!-- Page Header -->
        <section class="mt-2 mb-3 text-center">
            <h1>üë§ My Profile</h1>
            <p>Manage your account information and preferences</p>
        </section>

        <!-- Profile Information -->
        <section class="mb-3">
            <div class="card">
                <div class="card-header">
                    <h2>Account Information</h2>
                </div>
                <div class="card-body">
                    <div class="form-container" style="max-width: none;">
                        <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <!-- Personal Information -->
                            <div>
                                <h3>Personal Details</h3>
                                <div class="form-group">
                                    <label>First Name</label>
                                    <input type="text" class="form-control" th:value="${user != null ? user.firstName : ''}" readonly>
                                </div>

                                <div class="form-group">
                                    <label>Last Name</label>
                                    <input type="text" class="form-control" th:value="${user != null ? user.lastName : ''}" readonly>
                                </div>

                                <div class="form-group">
                                    <label>Email Address</label>
                                    <input type="email" class="form-control" th:value="${user != null ? user.email : ''}" readonly>
                                </div>

                                <div class="form-group">
                                    <label>Username</label>
                                    <input type="text" class="form-control" th:value="${user != null ? user.username : ''}" readonly>
                                </div>
                            </div>

                            <!-- Contact Information -->
                            <div>
                                <h3>Contact Details</h3>
                                <div class="form-group">
                                    <label>Phone Number</label>
                                    <input type="tel" class="form-control" th:value="${customer != null ? customer.phoneNumber : 'Not provided'}" readonly>
                                </div>

                                <div class="form-group">
                                    <label>Address</label>
                                    <textarea class="form-control" rows="3" readonly th:text="${customer != null ? customer.address : 'Not provided'}">Not provided</textarea>
                                </div>

                                <div class="form-group">
                                    <label>City</label>
                                    <input type="text" class="form-control" th:value="${customer != null ? customer.city : 'Not provided'}" readonly>
                                </div>

                                <div class="form-group">
                                    <label>Country</label>
                                    <input type="text" class="form-control" th:value="${customer != null ? customer.country : 'Not provided'}" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Information -->
                        <div class="mt-3">
                            <h3>Additional Information</h3>
                            <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <div class="form-group">
                                    <label>Date of Birth</label>
                                    <input type="date" class="form-control" th:value="${customer != null ? customer.dateOfBirth : ''}" readonly>
                                </div>

                                <div class="form-group">
                                    <label>ID Number</label>
                                    <input type="text" class="form-control" th:value="${customer != null ? customer.idNumber : 'Not provided'}" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- Account Status -->
                        <div class="mt-3">
                            <h3>Account Status</h3>
                            <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 2rem;">
                                <div class="form-group">
                                    <label>Account Status</label>
                                    <span class="amenity-tag confirmed" th:if="${user != null and user.isActive}">Active</span>
                                    <span class="amenity-tag cancelled" th:if="${user != null and !user.isActive}">Inactive</span>
                                </div>

                                <div class="form-group">
                                    <label>Email Verified</label>
                                    <span class="amenity-tag confirmed" th:if="${user != null and user.emailVerified}">Verified</span>
                                    <span class="amenity-tag pending" th:if="${user != null and !user.emailVerified}">Not Verified</span>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="mt-3 text-center">
                            <button class="btn btn-primary" onclick="enableEdit()">‚úèÔ∏è Edit Profile</button>
                            <button class="btn btn-secondary" onclick="changePassword()">üîê Change Password</button>
                            <a href="/dashboard" class="btn btn-secondary">üè† Back to Dashboard</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Account Summary -->
        <section class="mb-3">
            <div class="card">
                <div class="card-header">
                    <h2>Account Summary</h2>
                </div>
                <div class="card-body">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-number">0</div>
                            <div class="stat-label">Total Bookings</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-number">0</div>
                            <div class="stat-label">Completed Stays</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-number" th:text="${user != null ? #temporals.format(user.createdAt, 'yyyy') : 'N/A'}">2025</div>
                            <div class="stat-label">Member Since</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-number">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                            <div class="stat-label">Guest Rating</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<!-- Additional JavaScript -->
<th:block th:fragment="additional-js">
    <script>
        function enableEdit() {
            alert('Profile editing functionality coming soon! Please contact support to update your information.');
        }

        function changePassword() {
            if (confirm('Redirect to password change page?')) {
                window.location.href = '/auth/change-password';
            }
        }
    </script>
</th:block>

<!-- Additional CSS -->
<th:block th:fragment="additional-css">
    <style>
        .grid {
            display: grid;
        }

        .amenity-tag.confirmed {
            background-color: #d4edda;
            color: #155724;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .amenity-tag.pending {
            background-color: #fff3cd;
            color: #856404;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .amenity-tag.cancelled {
            background-color: #f8d7da;
            color: #721c24;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stat-card {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #666;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr !important;
            }
        }
    </style>
</th:block>
</body>
</html>